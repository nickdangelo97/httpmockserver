set(BUILD_SHARED_LIBS YES CACHE BOOL "")

if(USE_SYSTEM_CPR)
    find_package(CPR REQUIRED)
    if(NOT CPR_FOUND)
        message(FATAL_ERROR "CPR library not found.")
    endif()
else()
    set(BUILD_CPR_TESTS NO CACHE BOOL "")
    add_subdirectory(cpr)
    set(CPR_FOUND TRUE)
endif()
set(CPR_FOUND ${CPR_FOUND} CACHE INTERNAL "")
set(CPR_LIBRARIES ${CPR_LIBRARIES} CACHE INTERNAL "")
set(CPR_INCLUDE_DIRS ${CPR_INCLUDE_DIRS} CACHE INTERNAL "")

# GTEST could be already set by CPR package above
if(NOT GTEST_FOUND)
    if(USE_SYSTEM_GTEST)
        find_package(GTest REQUIRED)
    else()
        add_subdirectory(gtest)
        set(GTEST_FOUND TRUE)
        set(GTEST_LIBRARIES gtest)
        set(GTEST_MAIN_LIBRARIES gtest_main)
        set(GTEST_BOTH_LIBRARIES gtest gtest_main)
        set(GTEST_INCLUDE_DIRS ${gtest_SOURCE_DIR}/include)
    endif()
endif()
set(GTEST_FOUND ${GTEST_FOUND} CACHE INTERNAL "")
set(GTEST_LIBRARIES ${GTEST_LIBRARIES} CACHE INTERNAL "")
set(GTEST_MAIN_LIBRARIES ${GTEST_MAIN_LIBRARIES} CACHE INTERNAL "")
set(GTEST_BOTH_LIBRARIES ${GTEST_BOTH_LIBRARIES} CACHE INTERNAL "")
set(GTEST_INCLUDE_DIRS ${GTEST_INCLUDE_DIRS} CACHE INTERNAL "")

